var listeItems=[];var itemInd=0;var catInd;var itemsFituraide=[0,11,4,2];var titrePages={questions:"Cite-langage : Vidéothèque",parcours:"Cite-langage : Cartes des parcours",glossaire:"Cite-langage : Glossaire",item_0_0:"Cite-langage : pourquoi les hommes parlent-ils?",item_0_1:"Cite-langage : quand est apparu le langage ?"};var listeParcours=[];var parcours={id:"z",index:-1,etape:-1};var listeMotsCles=[];var listeGlossaire=[];var listePairesItemsParcours=[];var filtres_v1=[[0,[0,0,0,0,0,0,0,0,0,0,0,0,0],"domaines"],[0,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"prenotions"],[0,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"notions"]];var filtres={domaines:{actif:0,tags:[]},notions:{actif:0,tags:[]}};var resultatsRecherche=[[],[],[],[]];var listeTranscriptions=[[],[],[],[]];var nbTranscriptionsLues=0;var listeItemsVide=[{categorie:"Langage et langues",questions:[]},{categorie:"Une langue comment c'est fait ?",questions:[]},{categorie:"Langues et sociétés",questions:[]},{categorie:"Apprentissage et plurilinguisme",questions:[]}];var ftAffich=-1;var ftNb=4;var ftTempo;var largeurFt;var redimEnCours=false;var couleurParcours={A:"#3fbbed",B:"#c1292e",C:"#ee7aaa",D:"#8458a0",E:"#73bf44",F:"#6874b7",G:"#f8af3b"};var pourScroll;function item_clic(b){if(itemInd<listeItems.length){var a=b.target.parentNode.id.split("-")[1];var c=convNum_couple(a);window.location.hash="#item_"+c[0]+"_"+c[1]}}function glossaireClckHdlr(a){menuQuestionsInit();window.location.hash="#definition_"+a.target.id.split("_")[1]+"_"+a.target.id.split("_")[2]}function menuQuestionsInit(){$("#ctnFiltres").slideUp("slow");filtres.domaines.actif=0;filtres.notions.actif=0}function itemsFiltre_OU(){var f=listeItems;for(var e in filtres){if(filtres[e].actif===1&&filtres[e].tags.length>0){f=[{categorie:"Langage et langues",questions:[]},{categorie:"Une langue comment c'est fait ?",questions:[]},{categorie:"Langues et sociétés",questions:[]},{categorie:"Apprentissage et plurilinguisme",questions:[]}];for(var d=0;d<listeItems.length;d++){for(var c=0;c<listeItems[d].questions.length;c++){for(var a=0;a<filtres[e].tags.length;a++){var b=listeItems[d].questions[c][e][a];if(listeItems[d].questions[c][e].indexOf(filtres[e].tags[a])>-1){f[d].questions.push(listeItems[d].questions[c]);break}}}}}}affichItemsFiltred(f)}function itemsFiltre_ET(){var e=listeItems;for(var d in filtres){if(filtres[d].actif===1){e=[{categorie:"Langage et langues",questions:[]},{categorie:"Une langue comment c'est fait ?",questions:[]},{categorie:"Langues et sociétés",questions:[]},{categorie:"Apprentissage et plurilinguisme",questions:[]}];for(var c=0;c<listeItems.length;c++){for(var b=0;b<listeItems[c].questions.length;b++){var f=0;for(var a=0;a<filtres[d].tags.length;a++){if(listeItems[c].questions[b][d].indexOf(filtres[d].tags[a])>-1){f+=1}}if(f===filtres[d].tags.length){e[c].questions.push(listeItems[c].questions[b])}}}}}affichItemsFiltred(e)}function affichItemsFiltred(k){var f=document.getElementById("ctnQuestions");while(f.firstChild){f.removeChild(f.firstChild)}for(var g=0;g<k.length;g++){var e=document.createElement("div");e.className=" ctnCat";var a=document.createElement("div");var c=document.createElement("img");c.src="img/icones/cat_"+g+".svg";a.appendChild(c);var h=document.createElement("span");h.className="questionsCatTitre";h.innerHTML=k[g].categorie;a.appendChild(h);a.onclick=catTitreClcHdlr;e.appendChild(a);var b=document.createElement("div");b.id="ctnCatItems_"+g;b.className="ctnCatItems";if(k[g].questions.length>0){for(var d=0;d<k[g].questions.length;d++){b.appendChild(creationExtraitItem(k,g,d));e.appendChild(b)}document.getElementById("ctnQuestions").appendChild(e)}}}function creationExtraitItem(a,c,f){var b=document.createElement("button");b.className="ctnResumeItem";b.id="ctnResumeItem_"+a[c].questions[f].qId;b.onclick=resumeClcHdlr;var e=document.createElement("div");e.width="33px";e.height="33px";var d=document.createElement("p");d.innerHTML=a[c].questions[f].titre;b.appendChild(e);b.appendChild(d);return b}function catTitreClcHdlr(b){var a="ctnCatItems_"+b.currentTarget.id.split("_")[1];if($("#"+a).css("display")==="none"){$("#"+a).show("fast")}else{$("#"+a).hide("fast")}}function resumeClcHdlr(b){menuQuestionsInit();var a=b.currentTarget.id.split("_");window.location.hash="#item_"+a[1]+"_"+a[2]}function convNum_couple(a){var c=0;var b=a;if(b>21){c=3;b=b-22}else{if(b>12){c=2;b=b-13}else{if(b>7){c=1;b=b-8}}}return[c,b]}function creeListePourFituraide(){listePairesItemsParcours=[];for(var b=0;b<listeParcours.length;b++){for(var a=0;a<listeParcours[b].listeObjets.length;a++){if(listeParcours[b].listeObjets[a].type==="item"){listePairesItemsParcours.push({parcoursId:listeParcours[b].id,parcoursNom:listeParcours[b].nom,itemId:listeParcours[b].listeObjets[a].objId})}}}}function windowResizeHdlr(){window.removeEventListener("resize",windowResizeHdlr);redimEnCours=true;var a=setTimeout(function(){if(window.location.hash.indexOf("item")>-1){redimVimeo()}else{redimensioneFt()}window.addEventListener("resize",windowResizeHdlr);redimEnCours=false},200)}function redimensioneFt(){if(largeurFt){largeurFt=parseInt($("#ctnFts").css("width"));for(var a=0;a<ftNb;a++){$("#ctnFt_"+a).css("width",largeurFt-120);if(parseInt($("#ctnFt_"+a).css("left"))>0){$("#ctnFt_"+a).css("left",largeurFt)}}}}function parcoursMAJparId(c){parcours.id=c;for(var b=0;b<listeParcours.length;b++){if(listeParcours[b].id===parcours.id){parcours.index=b}}for(var a=0;a<listeParcours[parcours.index].listeObjets.length;a++){if(listeParcours[parcours.index].listeObjets[a].objId===window.location.hash.substring(6)){parcours.etape=a}}}function redimVimeo(){var a=parseInt($("#vidItem").css("width"))*9/16;$("#vidItem").css("height",a);return a}function lectureTranscriptions(a,c){var d=listeItems[a].questions[c].questionNum;var b="donnees/transcriptions/"+d+".html";$.ajax({type:"GET",url:b,dataType:"html",success:function(f){if(f){var e=new RegExp("<.[^>]*>","gi");listeTranscriptions[a][c]=f.replace(e,"");nbTranscriptionsLues+=1}},error:function(){alert("Pas de lecture du fichier : "+b,"erreur")}})}function affichParcours(){if(parcours.id!=="z"){$("#colGaucheBas").load("html/barreParcours.html");if(parcours.etape<listeParcours[parcours.index].listeObjets.length-1){if(parcours.etape>0){var b=listeParcours[parcours.index].listeObjets[parcours.etape-1].objId;$("#ctnParcoursPrec").html("Vidéo précédente");$("#ctnParcoursPrec").show("fast")}else{$("#ctnParcoursPrec").hide("fast")}var a=parseInt(parcours.etape)+1;var e=listeParcours[parcours.index].listeObjets[a].objId;if(listeParcours[parcours.index].listeObjets[a].type.indexOf("acti")===0){var d=document.createElement("img");d.src="img/interface/acti.png";document.getElementById("ctnParcoursSuiv").appendChild(d)}else{$("#ctnParcoursSuiv").html("Vidéo suivante")}$("#ctnParcoursSuiv").show("fast")}else{$("#ctnParcoursSuiv").hide("fast")}if(window.location.hash.indexOf("acti")===-1){var c=parcours.id+"-"+listeItems[window.location.hash.split("_")[1]].questions[window.location.hash.split("_")[2]].questionNum;if(tblReponses[c+"_0_V"]!==true){if(listeActivites[c][0].type==="qcu"){qcuCreation(c,0)}else{if(listeActivites[c][0].type==="qcm"){qcmCreation(c,0)}}}}}else{$("#colGaucheBas").load("html/sansParcours.html")}};